# Apifox API 文档集合

本目录包含 IM Chat 系统所有模块的 OpenAPI 3.0 规范文档，可直接导入 Apifox 进行测试。

## 📁 文件列表

### ✅ 已实现的模块

| 文件名 | 模块 | 接口数量 | 服务端口 | 状态 |
|--------|------|---------|---------|------|
| `01-用户管理.json` | 用户管理 | 5个 (4个已实现) | 8081 | ✅ 可用 |

**已实现的接口：**
- ✅ POST `/api/user/register` - 用户注册
- ✅ POST `/api/user/login` - 用户登录
- ✅ GET `/api/user/info/{userId}` - 获取用户信息
- ✅ PUT `/api/user/info` - 更新用户信息
- ❌ GET `/api/user/search` - 搜索用户（未实现）

### ❌ 未实现的模块

| 文件名 | 模块 | 接口数量 | 服务端口 | 状态 |
|--------|------|---------|---------|------|
| `02-好友管理.json` | 好友管理 | 4个 | 8081 | ❌ 待实现 |
| `03-群组管理.json` | 群组管理 | 6个 | 8081 | ❌ 待实现 |
| `04-消息管理.json` | 消息管理 | 3个 | 8082 | ❌ 待实现 |
| `05-会话管理.json` | 会话管理 | 4个 | 8082 | ❌ 待实现 |
| `06-文件管理.json` | 文件管理 | 4个 | 8083 | ❌ 待实现 |
| `07-朋友圈.json` | 朋友圈 | 7个 | 8084 | ❌ 待实现 |
| `08-系统通知.json` | 系统通知 | 3个 | 8081 | ❌ 待实现 |

## 📥 导入方法

### 方式一：批量导入（推荐）

1. 打开 Apifox
2. 点击左上角"**导入**"按钮
3. 选择"**OpenAPI/Swagger**"
4. 选择"**从文件导入**"
5. 按住 `Ctrl` 选择所有 `.json` 文件
6. 点击"**确认导入**"

### 方式二：单个导入

针对单个模块进行导入：

1. 打开 Apifox
2. 点击左上角"**导入**"
3. 选择"**OpenAPI/Swagger**"
4. 选择对应的 JSON 文件
5. 点击"**确认导入**"

## 🧪 测试步骤

### 1. 启动后端服务

```bash
# 启动用户服务（8081端口）
cd e:\IM_java\im-user-service
mvn spring-boot:run
```

### 2. 在 Apifox 中配置环境变量

创建环境：`本地开发`

| 变量名 | 值 | 说明 |
|--------|-------|------|
| `base_url` | `http://localhost:8081` | 用户服务地址 |
| `token` | `(登录后获取)` | JWT Token |

### 3. 测试流程

#### 步骤 1：用户注册
```
POST {{base_url}}/api/user/register
{
  "username": "testuser001",
  "password": "123456",
  "nickname": "测试用户"
}
```

#### 步骤 2：用户登录
```
POST {{base_url}}/api/user/login
{
  "username": "testuser001",
  "password": "123456"
}
```

**将返回的 `token` 保存到环境变量中**

#### 步骤 3：获取用户信息
```
GET {{base_url}}/api/user/info/1
Headers:
  Authorization: Bearer {{token}}
```

#### 步骤 4：更新用户信息
```
PUT {{base_url}}/api/user/info
Headers:
  Authorization: Bearer {{token}}
Body:
{
  "nickname": "新昵称",
  "signature": "这是我的个性签名"
}
```

## 📊 接口统计

- **总接口数**：36个
- **已实现**：4个 (11%)
- **未实现**：32个 (89%)

### 按模块统计

| 模块 | 已实现 | 未实现 | 进度 |
|------|--------|--------|------|
| 用户管理 | 4 | 1 | 80% |
| 好友管理 | 0 | 4 | 0% |
| 群组管理 | 0 | 6 | 0% |
| 消息管理 | 0 | 3 | 0% |
| 会话管理 | 0 | 4 | 0% |
| 文件管理 | 0 | 4 | 0% |
| 朋友圈 | 0 | 7 | 0% |
| 系统通知 | 0 | 3 | 0% |

## 🔐 认证说明

### JWT Token 格式

```
Authorization: Bearer eyJhbGciOiJIUzI1NiJ9.eyJ1c2VySWQiOjF9.xxx
```

### Token 获取方式

1. 调用登录接口 `/api/user/login`
2. 从响应中获取 `data.token` 字段
3. 在后续请求的 Header 中添加 `Authorization: Bearer {token}`

## ⚠️ 注意事项

1. **已实现接口**标注为 ✅，**未实现接口**标注为 ❌
2. 未实现的接口仅提供文档规范，调用会返回 404
3. 测试前请确保对应的后端服务已启动
4. JWT Token 有效期为 7 天，过期后需重新登录

## 📞 联系方式

- 项目地址：`e:\IM_java`
- API 设计文档：`e:\IM_java\API接口设计.md`
- 架构设计文档：`e:\IM_java\架构设计文档.md`

## 🚀 开发计划

### Phase 1 - 用户服务（进行中）
- [x] 用户注册
- [x] 用户登录
- [x] 获取用户信息
- [x] 更新用户信息
- [ ] 搜索用户

### Phase 2 - 好友管理（待开发）
- [ ] 好友列表
- [ ] 添加好友
- [ ] 处理好友申请
- [ ] 删除好友

### Phase 3 - 群组管理（待开发）
- [ ] 创建群组
- [ ] 群组列表
- [ ] 群组详情
- [ ] 群成员列表
- [ ] 邀请入群
- [ ] 退出群组

### Phase 4 - 消息服务（待开发）
- [ ] WebSocket 连接
- [ ] 发送消息
- [ ] 历史消息
- [ ] 撤回消息
- [ ] 标记已读

### Phase 5 - 其他功能（待开发）
- [ ] 文件上传下载
- [ ] 朋友圈
- [ ] 系统通知

---

**最后更新时间：** 2025-11-18  
**文档版本：** v1.0.0
